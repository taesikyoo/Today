# 토비의 스프링 3.1 Vol.1 스프링의 이해와 원리

# 7장 스프링 핵심 기술의 응용

## 2021-02-09

p678

**메타 애노테이션** : 애노테이션의 정의에 부여된 애노테이션, 여러 개의 애노테이션에 공통적인 속성을 부여

```java
@Component
public @interface SnsConnector {
    ...
}
```



p690

**@Profile과 @ActiveProfiles**

실행환경에 따라 빈 구성이 달라지는 내용을 프로파일로 정의해서 만들어두고, 실행 시점에 어떤 프로파일의 빈 설정을 사용할지 지정할 수 있다.

프로파일은 설정 클래스 단위로 지정한다.

```java
@Configuration
@Profile("test")
public class TestAppContext {
```

프로파일을 적용하면 모든 설정 클래스를 부담 없이 메인 설정 클래스에서 @Import해도 된다는 장점이 있다.

활성 프로파일로 test 프로파일을 지정하려면 @ActiveProfiles 애노테이션을 사용하면 된다.



p697~

**프로퍼티 소스** : 컨테이너가 프로퍼티 값을 가져오는 대상

@Value와 PropertySourcesPlaceholderConfigurer를 사용 cf. Enviroment 오브젝트를 사용

```java
@PropertySource("/database.properties")
public class AppContext {
    
    @Value("${db.driverClass}") Class<? extends Driver> driverClass;
	@Value("${db.url}") String url;
	@Value("${db.username}") String username;
	@Value("${db.password}") String password;
	
    // static으로 선언
	@Bean
	public static PropertySourcesPlaceholderConfigurer placeholderConfigurer() {
		return new PropertySourcesPlaceholderConfigurer();
	}
    
    @Bean
	public DataSource dataSource() {
		SimpleDriverDataSource ds = new SimpleDriverDataSource();
        ds.setDriverClass(this.driverClass);
		ds.setUrl(this.url);
		ds.setUsername(this.username);
		ds.setPassword(this.password);	
        return ds;
	}
}
```



~p701